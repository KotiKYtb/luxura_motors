{% extends "base.html" %}
{% load static %}

{% block title %}Notre collection{% endblock %}

{% block content %}
  <div class="page-hero">
    <h1 class="page-hero-title gsap-fade-up">Notre collection</h1>
    <p class="page-hero-desc gsap-fade-up">Véhicules d'exception — visite sur rendez-vous</p>
  </div>

  <section class="section">
    <div class="vehicules-grid">
      {% for v in vehicules %}
        <article class="vehicule-card card-reveal">
          <a href="{% url 'vehicule_detail' v.pk %}" class="vehicule-card-link">
            <div class="card-image-wrap">
              {% if v.image_principale %}
                <img src="{{ v.image_principale.url }}" alt="{{ v.titre }}" loading="lazy">
              {% elif v.image_url %}
                <img src="{{ v.image_url }}" alt="{{ v.titre }}" loading="lazy">
              {% else %}
                <img src="https://placehold.co/600x375/1c1c1c/c38c37?text={{ v.modele|urlencode }}" alt="{{ v.titre }}" loading="lazy">
              {% endif %}
              <span class="card-badge">{{ v.get_marque_display }}</span>
              <div class="card-specs-overlay">
                <div class="card-specs-overlay-inner">
                  <p class="card-specs-line-overlay">{{ v.annee }} · {{ v.kilometrage|floatformat:0 }} km{% if v.puissance_ch %} · {{ v.puissance_ch }} ch{% endif %}</p>
                  <p class="card-specs-price-overlay">{{ v.prix|floatformat:0 }} €</p>
                  <span class="card-specs-cta">Découvrir</span>
                </div>
              </div>
            </div>
            <div class="card-body">
              <h3 class="card-title">{{ v.titre }}</h3>
              <p class="card-marque">{{ v.get_marque_display }}</p>
              <p class="card-specs-line">{{ v.annee }} · {{ v.kilometrage|floatformat:0 }} km · <strong>{{ v.prix|floatformat:0 }} €</strong></p>
              <span class="card-cta">Découvrir</span>
            </div>
          </a>
        </article>
      {% empty %}
        <p class="text-center" style="grid-column: 1/-1; color: var(--text-muted);">
          Aucun véhicule pour le moment.
        </p>
      {% endfor %}
    </div>
  </section>
{% endblock %}
